# 开发前分析
1. 消息格式：支持数组遍历（devices、services）
	1. 消息中devices和services是数组结构，因此一条消息中可能含有多个devices、一个devices中可能有多条services的数据。
	2. {
		  "devices": [{          // 数组结构
		    "deviceId": "...",
		    "services": [{       // 数组结构
			      "serviceId": "fileTransfer",
			      "data": {...},
			      "eventTime": "..."
		    }]
		  }]
		}

2. ORM：MyBatis-Plus

3. ~~Redis：在 docker-compose 中添加 Redis 服务~~
	1. 因为单节点

4. 数据库：使用与 backend 相同的连接

5. 连接池：默认 HikariCP

6. 幂等性：deviceId + eventTime + serviceId
	1. 如果使用主流 MQ（Kafka/RabbitMQ/RocketMQ/MQTT），都遵循”至少投递一次“，也就是会出出现重复的信息
	2. 因此绝大多数情况下都需要幂等

7. 批量处理：不批量，逐条处理

8. 文件大小：最大 5KB

9. 错误处理：失败返回 false 重试，记录到应用日志（不存数据库）

10. MD5 校验失败：记录日志并返回错误